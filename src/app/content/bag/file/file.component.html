<div class="file" [class.details-active]="detailsActive">
    @if (file.state === State.READY) {
    <div class="main-wrapper ready">
        <div class="logo" (click)="toggleDetails()"><img [src]="logoUrl" alt="extension logo"></div>
        <div class="name" (click)="toggleDetails()">{{file.name}}</div>
        <button class="download state" (click)="emitDownload()"><i class="fa-solid fa-cloud-arrow-down"></i></button>
    </div>
    }
    @if (file.state === State.DONE) {
    <div class="main-wrapper done">
        <div class="logo" (click)="toggleDetails()"><img [src]="logoUrl" alt="extension logo"></div>
        <div class="name" (click)="toggleDetails()">
            <p>{{file.name}}</p>
            <p>Ready to save</p>
        </div>
        <a [href]="file.url" [download]="file.name" class="progress-wrapper state">
            <button class="download state">
                <i class="fa-solid fa-floppy-disk"></i>
            </button>
        </a>
    </div>
    }

    @if (file.state === State.ENCRYPT) {
    <div class="main-wrapper encrypt">
        <div class="logo" (click)="toggleDetails()"><img [src]="logoUrl" alt="extension logo"></div>
        <div class="name" (click)="toggleDetails()">
            <p>{{file.name}}</p>
            <p>Encrypting...</p>
        </div>
        <div class="state state-encrypt">
            <i class="fa-solid fa-key"></i>
            <mat-progress-spinner mode="indeterminate" [value]="50" diameter="30"
                color="primary"></mat-progress-spinner>
        </div>
    </div>
    }
    @if (file.state === State.DECRYPT) {
    <div class="main-wrapper decrypt">
        <div class="logo" (click)="toggleDetails()"><img [src]="logoUrl" alt="extension logo"></div>
        <div class="name" (click)="toggleDetails()">
            <p>{{file.name}}</p>
            <p>Decrypting...</p>
        </div>
        <div class="state state-decrypt">
            <i class="fa-solid fa-fingerprint"></i>
            <mat-progress-spinner mode="indeterminate" [value]="50" diameter="30"
                color="primary"></mat-progress-spinner>
        </div>
    </div>
    }
    @if (file.state === State.UPLOAD) {
    <div class="main-wrapper upload">
        <div class="logo" (click)="toggleDetails()"><img [src]="logoUrl" alt="extension logo"></div>
        <div class="name" (click)="toggleDetails()">
            <p>{{file.name}}</p>
            <p>Uploading...</p>
        </div>
        <div class="state state-upload">
            <i class="fa-solid fa-cloud-arrow-up"></i>
            <mat-progress-spinner mode="determinate" [value]="file.progress" diameter="30"
                color="primary"></mat-progress-spinner>
        </div>
    </div>
    }
    @if (file.state === State.DOWNLOAD) {
    <div class="main-wrapper download">
        <div class="logo" (click)="toggleDetails()"><img [src]="logoUrl" alt="extension logo"></div>
        <div class="name" (click)="toggleDetails()">
            <p>{{file.name}}</p>
            <p>Downloading...</p>
        </div>
        <div class="state state-download">
            <i class="fa-solid fa-cloud-arrow-down"></i>
            <mat-progress-spinner mode="determinate" [value]="file.progress" diameter="30"
                color="primary"></mat-progress-spinner>
        </div>
    </div>
    }

    @if (file.state === State.ERROR) {
    <div class="main-wrapper error">
        <div class="logo" (click)="toggleDetails()"><img [src]="logoUrl" alt="extension logo"></div>
        <div class="name" (click)="toggleDetails()">
            <p>{{file.name}}</p>
            <p>Failed, try again</p>
        </div>
        <div class="progress-wrapper state">
            <button class="retry state" (click)="tryAgain()">
                <i class="fa-solid fa-rotate-right"></i>
            </button>
        </div>
    </div>
    }



    <div class="details">
        <div class="details-wrapper">
            <i class="line fa-solid fa-window-minimize"></i>
            <h3 class="title">Details:</h3>
            <div class="name">
                <p class="value-title">Name: </p>
                <p class="value">{{file.name}}</p>
            </div>
            <div class="size">
                <p class="value-title">Size: </p>
                <p class="value">{{size}}</p>
            </div>
            <div class="extension">
                <p class="value-title">Extension: </p>
                <p class="value">{{file.extension}}</p>
            </div>
            <div class="created">
                <p class="value-title">Created: </p>
                <p class="value">{{date}}</p>
            </div>
            <div class="preview">
                <img src="./assets/images/sample-preview.jpg" alt="" class="photo">
            </div>

            <button class="change-name" (click)="emitChangeName()">
                <i class="fa-solid fa-pencil"></i>
                <p>Change name</p>
            </button>
            <button class="delete" (click)="emitDelete()">
                <i class="fa-solid fa-trash-can"></i>
                <p>Delete file</p>
            </button>
        </div>
    </div>
</div>
